<!DOCTYPE HTML>
<html>
	<head>
		<title>Tour de Timor - Weather</title>
		<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />

		<link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/font-awesome/4.3.0/css/font-awesome.min.css" />
		<link rel="stylesheet" href="//ajax.googleapis.com/ajax/libs/jquerymobile/1.4.5/jquery.mobile.min.css" />
		<link rel="stylesheet" href="/vendor/waves/waves.min.css" />
		<link rel="stylesheet" href="/css/nativedroid2.css" />
		
				<link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/weather-icons/2.0.9/css/weather-icons.min.css" />



				<style>
					/* Prevent FOUC */
					body { opacity: 0; }
				</style>

	</head>
	<body>

		<div data-role="page" id="home">

			<nd2-include data-src="/examples/fragments/panel.left.html"></nd2-include>

			<div data-role="panel" id="bottomsheet" class="ui-bottom-sheet ui-bottom-sheet-list" data-animate="false" data-position='bottom' data-display="overlay">
				<nd2-include data-src="/examples/fragments/bottom.sheet.html"></nd2-include>
			</div>


			<div data-role="panel" id="bottomsheetblock" class="ui-bottom-sheet" data-animate="false" data-position='bottom' data-display="overlay">
				<nd2-include data-src="/examples/fragments/bottom.sheet.html"></nd2-include>
			</div>

			<div data-role="header" data-position="fixed" class="wow fadeIn">
				<a href="#bottomsheetblock" class="ui-btn ui-btn-right wow fadeIn" data-wow-delay='1.2s'><i class="zmdi zmdi-more-vert"></i></a>
				<a href="#leftpanel" class="ui-btn ui-btn-left wow fadeIn" data-wow-delay='0.8s'><i class="zmdi zmdi-menu"></i></a>
				<h1 class="wow fadeIn" data-wow-delay='0.4s'>Weather</h1>
			</div>

			<div role="main" class="ui-content wow fadeIn" data-inset="false" data-wow-delay="0.2s">
			    
			    				<!-- Simple Card !-->

				<div class="nd2-card">

					<div class="card-supporting-text">

<!--weather-->
 <!-- Weather Chip -->
  <div class="chip">
    <!-- Temperature Row -->
    <div class="row">
      <div class="col-5" id="weather-icon"></div>
      <div class="col-7">
        <div class="row"> 
          <div class="col-8">
            <h1 class="display-3" id="temp"></h1>
          </div>
          <!-- Change Temperature Unit -->
          <div class="col-2">
            <button id="btnCelsius" onclick="getCelsius()" disabled>°C</button>
          </div>
          <div class="col-2">
            <button id="btnFahrenheit" onclick="getFahrenheit()">°F</button>
          </div>
          <!-- end Change Temperature Unit -->
        </div>
        <div class="row">
            <h6 id="description"></h6>
        </div>
      </div>
    </div> <!-- end Temperature Row -->
    
    <!-- Date, Time and Place Row -->
    <div class="row">
      <div class="col text-center">
        <h3 id="place"></h3>
        <h3 id="dateTime"></h3>
      </div>
    </div> <!-- end Date, Time and Place Row -->
    
    <!-- Other Weather Details Row -->
    <div id="otherDetails" class="row">
      <div class="col text-center">
        <i class='wi wi-humidity' style='font-size: 3em'></i>
        <h4 id="humidity"></h4>
      </div>
      <div class="col text-center">
        <i class='wi wi-strong-wind' style='font-size: 3em'></i>
        <h4 id="windSpeed"></h4>
      </div>
      <div class="col text-center">
        <i class='wi wi-thermometer' style='font-size: 3em'></i>
        <h4 id="celsius"></h4>
      </div>
    </div> <!-- end Other Weather Details Row -->
  </div> <!-- end Weather Chip -->
								

					</div>

				</div>


			</div>

		<!--

			<div data-role="footer" data-position="fixed">

				<div class="row center-xs">
					<div class="col-xs-4">
						<div class="box">
							<a href="#" class="ui-btn ui-mini nd2-btn-icon-block"><i class='zmdi zmdi-edit'></i> edit</a>
						</div>
					</div>
					<div class="col-xs-4">
						<div class="box">
							<a href="#" class="ui-btn ui-mini nd2-btn-icon-block"><i class='zmdi zmdi-plus'></i> add</a>
						</div>
					</div>
					<div class="col-xs-4">
						<div class="box">
							<a href="#" class="ui-btn ui-mini nd2-btn-icon-block"><i class='zmdi zmdi-minus'></i> remove</a>
						</div>
					</div>
				</div>


			</div>
			!-->

		</div>
		
	<script>
	    if (navigator.geolocation) {				
 navigator.geolocation.getCurrentPosition(showPosition);
} else {
 alert('Geolocation is not supported in your browser');
}

function showPosition(position) {
  var api = "https://fcc-weather-api.glitch.me/api/current?lat=" + position.coords.latitude + "&lon=" + position.coords.longitude;

  $.getJSON(api, function(data){
    // Getting Weather Details
    $("#place").html(data.name + ", " + data.sys.country);
    $("#windSpeed").html(data.wind.speed + "km/h");
    $("#humidity").html(data.main.humidity + "%");
    $("#celsius").html(data.main.temp.toFixed(1) + "°C");
    $("#temp").html(data.main.temp.toFixed(1));
    $("#description").html(data.weather[0].description);
    
    // Get Current Date and Time
    var dt = new Date();
    $("#dateTime").html(dt.getDate() + "/" + (dt.getMonth()+1)  + "/" + dt.getFullYear() + " "+ dt.getHours() + ":" + dt.getMinutes());
    
    // Weather Icon Conditions
    if(data.weather[0].description.indexOf("clouds")!== -1){
      $("#weather-icon").html("<i class='wi wi-day-cloudy' style='font-size: 7em'></i>");   
    }
    else if(data.weather[0].description.indexOf("clear sky")!== -1){
      $("#weather-icon").html("<i class='wi wi-day-sunny' style='font-size: 7em'></i>");
    }
    else if(data.weather[0].description.indexOf("rain")!== -1){
      $("#weather-icon").html("<i class='wi wi-rain-wind' style='font-size: 7em'></i>");
    }
    else if(data.weather[0].description.indexOf("thunderstorm")!== -1){
      $("#weather-icon").html("<i class='wi wi-thunderstorm' style='font-size: 7em'></i>");
    }
    else if(data.weather[0].description.indexOf("snow")!== -1){
      $("#weather-icon").html("<i class='wi wi-snow' style='font-size: 7em'></i>");
    }
    else if(data.weather[0].description.indexOf("mist")!== -1){
      $("#weather-icon").html("<i class='wi wi-fog' style='font-size: 7em'></i>");
    }
    else if(data.weather[0].description.indexOf("mist")!== -1){
      $("#weather-icon").html("<i class='wi wi-fog' style='font-size: 7em'></i>");
    }
  });
}

// Temperature Conversion
function getFahrenheit() {
  $("#btnCelsius").css("color", "#2d314a");
  $("#btnFahrenheit").css("color", "#fff");
  $("#btnCelsius").prop("disabled", false);
  $("#btnFahrenheit").prop("disabled", true);
  
  $("#temp").html(((parseInt($("#temp").text()) * 1.8) + 32).toFixed(1));
}
                                           
function getCelsius() {
  $("#btnCelsius").css("color", "#fff");
  $("#btnFahrenheit").css("color", "#2d314a");
  $("#btnCelsius").prop("disabled", true);
  $("#btnFahrenheit").prop("disabled", false);
  
  $("#temp").html(Math.round((parseInt($("#temp").text()) - 32)/ 1.8).toFixed(1));
}
	</script>

	
		<script src="//ajax.googleapis.com/ajax/libs/jquery/2.1.4/jquery.min.js"></script>
		<script src="//code.jquery.com/ui/1.11.4/jquery-ui.min.js"></script>
		<script src="//ajax.googleapis.com/ajax/libs/jquerymobile/1.4.5/jquery.mobile.min.js"></script>
		<script src="/vendor/waves/waves.min.js"></script>
		<script src="/js/nativedroid2.js"></script>
		<script src="/nd2settings.js"></script>

	</body>
</html>
